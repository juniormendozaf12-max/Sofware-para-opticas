# üöÄ PROPUESTA: SISTEMA AUTOMATIZADO DE LUNAS CON ESC√ÅNER QR/BARRAS

## üìã Investigaci√≥n Realizada

### Sistemas Profesionales Analizados:

#### 1. **GIO Web** (L√≠der en Espa√±a)
- ‚úÖ Tecnolog√≠a RFID para inventario completo en <30 minutos
- ‚úÖ Integraci√≥n autom√°tica con Luxottica (programa Stars)
- ‚úÖ Sistema de reposici√≥n autom√°tica
- ‚úÖ CRM integrado con historial de graduaciones

**Fuente:** [GIO Web - Software para √≥pticas](https://www.deipe.com/software-para-opticas-gio-web/)

#### 2. **Trimax Per√∫** (Laboratorio √ìptico Digital)
- ‚úÖ Laboratorio 100% peruano con 18 a√±os de experiencia
- ‚úÖ 26 locaciones en todo Per√∫
- ‚úÖ Producci√≥n y distribuci√≥n de lunas oft√°lmicas
- ‚úÖ Enfoque en calidad y tecnolog√≠a

**Fuente:** [Trimax Laboratorio](https://www.trimaxlaboratorio.com/)

#### 3. **Sistemas de C√≥digos QR Profesionales**
- ‚úÖ Capacidad de 7,000 n√∫meros o 4,000 caracteres alfanum√©ricos
- ‚úÖ 350x m√°s informaci√≥n que c√≥digo de barras tradicional
- ‚úÖ Escaneo instant√°neo con smartphone
- ‚úÖ Reducci√≥n de errores manuales en 95%

**Fuente:** [QR Code Inventory Management](https://www.qrcode-tiger.com/how-to-use-qr-codes-for-inventory-management-system)

---

## üéØ PROPUESTA DE MEJORAS

### **MEJORA 1: Esc√°ner Ultrarr√°pido QR/C√≥digo de Barras**

#### Caracter√≠sticas:
- üîç **B√∫squeda instant√°nea** por QR, c√≥digo de barras o nombre
- ‚ö° **Autoenfoque autom√°tico** en campo de b√∫squeda
- üì± **Compatible con lectores USB** y c√°maras de smartphone
- üéØ **Feedback visual y sonoro** al escanear
- üìä **Historial de √∫ltimos 10 productos escaneados**
- üîÑ **Modo continuo** para escaneo m√∫ltiple

#### Ubicaciones:
1. **M√≥dulo Inventario** - Esc√°ner para gesti√≥n r√°pida de stock
2. **M√≥dulo Ventas** - Esc√°ner para agregar productos a venta
3. **M√≥dulo Lunas** - Esc√°ner especializado para cristales

#### Interfaz Propuesta:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üì¶ ESC√ÅNER R√ÅPIDO DE PRODUCTOS                        [√ó]  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                             ‚îÇ
‚îÇ  üîç C√ìDIGO DEL PRODUCTO                                    ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ Escanea QR o c√≥digo de barras...            üéØ üì∑ ‚îÇ     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  ‚öôÔ∏è MODO DE OPERACI√ìN                                      ‚îÇ
‚îÇ  ‚óã Individual  ‚óè Continuo  ‚ñ° Cantidad personalizada       ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  ‚úÖ √öLTIMO PRODUCTO PROCESADO                              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ  Luna Serie 1.56 - Monofocal                       ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  üìä Stock: 32  üí∞ S/ 120.00                        ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  üè∑Ô∏è LUN-156-MO-A3F2                                ‚îÇ     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  üìú HISTORIAL (√öltimos escaneados)                         ‚îÇ
‚îÇ  ‚Ä¢ LUN-156-MO-A3F2  ‚Üí  S/ 120.00  [‚úì Agregado]            ‚îÇ
‚îÇ  ‚Ä¢ MON-007          ‚Üí  S/ 85.00   [‚úì Agregado]            ‚îÇ
‚îÇ  ‚Ä¢ ACC-003          ‚Üí  S/ 15.00   [‚úì Agregado]            ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  [üîÑ Limpiar]  [‚ö° Activar Sonido]  [‚úì Cerrar]             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### **MEJORA 2: Generador Autom√°tico de QR y C√≥digos de Barras**

#### Sistema de Codificaci√≥n Inteligente:

**Formato para Lunas:**
```
QR Code Content:
{
  "tipo": "LUNA",
  "codigo": "LUN-156-MO-A3F2",
  "serie": "1.56",
  "tipoLente": "Monofocal",
  "tratamientos": ["Antireflejo", "Blue Defense"],
  "precio": 120.00,
  "stock": 32,
  "graduacion": {
    "OD": { "esf": -2.50, "cil": -0.75, "eje": 90 },
    "OI": { "esf": -2.25, "cil": -0.50, "eje": 85 }
  },
  "fecha": "2025-12-31",
  "url": "https://opticasicuani.com/productos/LUN-156-MO-A3F2"
}
```

#### Generaci√≥n Autom√°tica:
1. **Al crear luna** ‚Üí Se genera QR + C√≥digo de barras autom√°ticamente
2. **Al editar luna** ‚Üí Se actualiza QR con nueva informaci√≥n
3. **Al agregar a venta** ‚Üí Se puede escanear para autocompletar

#### Funciones de Impresi√≥n:
- üìÑ **Etiquetas individuales** (40mm x 25mm)
- üìÑ **Etiquetas en lote** (hoja A4 con 24 etiquetas)
- üìÑ **Etiquetas con precio** (incluye serie, tipo, precio)
- üìÑ **Etiquetas solo QR** (para inventario r√°pido)

---

### **MEJORA 3: Sistema Automatizado de Lunas - Inspirado en GIO Web**

#### Caracter√≠sticas Principales:

##### A) **Gesti√≥n Autom√°tica de Stock**
```javascript
// Cuando se vende una luna, el sistema:
1. Reduce stock autom√°ticamente
2. Genera alerta si stock < m√≠nimo
3. Sugiere reposici√≥n basada en:
   - Ventas √∫ltimos 30 d√≠as
   - Tendencia de graduaciones m√°s comunes
   - Temporada del a√±o
```

##### B) **Cat√°logo Inteligente de Lunas**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üîµ CAT√ÅLOGO AUTOM√ÅTICO DE LUNAS                       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                         ‚îÇ
‚îÇ  üîç B√∫squeda Inteligente                               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ
‚îÇ  ‚îÇ Buscar por graduaci√≥n, serie, tipo...        ‚îÇ      ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ  üéØ FILTROS R√ÅPIDOS                                    ‚îÇ
‚îÇ  [Todo] [En Stock] [Bajo Stock] [M√°s Vendidas]        ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ  üìä SERIES DISPONIBLES                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ
‚îÇ  ‚îÇ üîò Serie 1.50  ‚îÇ  Stock: 45  ‚îÇ  S/ 80        ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ üîµ Serie 1.56  ‚îÇ  Stock: 32  ‚îÇ  S/ 120  ‚ö†Ô∏è   ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ üíé Serie 1.60  ‚îÇ  Stock: 28  ‚îÇ  S/ 180       ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ ‚ú® Serie 1.67  ‚îÇ  Stock: 15  ‚îÇ  S/ 250  ‚ö†Ô∏è   ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ üëë Serie 1.74  ‚îÇ  Stock: 8   ‚îÇ  S/ 350  ‚ö†Ô∏è   ‚îÇ      ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ  üí° RECOMENDACI√ìN INTELIGENTE                          ‚îÇ
‚îÇ  Basado en graduaci√≥n del cliente:                     ‚îÇ
‚îÇ  üëâ Serie 1.56 recomendada (Balance precio/calidad)   ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ  [üì¶ Ver Detalle] [‚ö° Agregar a Venta] [üñ®Ô∏è Imprimir] ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

##### C) **Sistema de Bonificaciones Autom√°tico**
```javascript
// BONIFICACIONES AUTOM√ÅTICAS POR CANTIDAD
const BONIFICACIONES = {
  LUNAS: {
    2: { descuento: 10, mensaje: "2do par con 10% descuento" },
    3: { descuento: 15, mensaje: "3er par con 15% descuento" },
    5: { descuento: 20, mensaje: "5+ pares con 20% descuento" }
  },
  MONTURAS: {
    2: { descuento: 15, mensaje: "2da montura con 15% descuento" },
    3: { descuento: 20, mensaje: "Combo 3 monturas -20%" }
  }
};

// Aplicaci√≥n autom√°tica al agregar productos
function aplicarBonificacionAutomatica(items) {
  const lunasCount = items.filter(i => i.tipo === 'LUNA').length;

  if (lunasCount >= 2) {
    // Aplicar descuento autom√°ticamente al 2do producto
    const bonificacion = BONIFICACIONES.LUNAS[lunasCount];
    items[1].descuento = items[1].precio * (bonificacion.descuento / 100);
    toast(`üéâ ${bonificacion.mensaje}`, 'success');
  }
}
```

---

### **MEJORA 4: Modificaci√≥n Manual con Interfaz Intuitiva**

#### Panel de Edici√≥n R√°pida:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ‚úèÔ∏è EDICI√ìN R√ÅPIDA DE LUNA                            [√ó]  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                             ‚îÇ
‚îÇ  üìä INFORMACI√ìN B√ÅSICA                                      ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ C√≥digo:  LUN-156-MO-A3F2        [üîÑ Regenerar]    ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ Serie:   1.56 ‚ñº                                   ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ Tipo:    Monofocal ‚ñº                              ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ Stock:   [  32  ]  ‚ö†Ô∏è Bajo stock                 ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ Precio:  [  120.00  ] Autom√°tico ‚òë               ‚îÇ     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  üé® TRATAMIENTOS                                           ‚îÇ
‚îÇ  ‚òë Antireflejo (+S/ 30)    ‚òë Blue Defense (+S/ 40)       ‚îÇ
‚îÇ  ‚òê Fotocrom√°tico (+S/ 80)  ‚òê Polarizado (+S/ 90)         ‚îÇ
‚îÇ  ‚òê UV400 (+S/ 25)          ‚òê Crizal (+S/ 60)             ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  üìê GRADUACI√ìN (Opcional - Para stock espec√≠fico)          ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ  ‚îÇ     ‚îÇ ESFERA ‚îÇ CILINDRO ‚îÇ EJE ‚îÇ ADD ‚îÇ            ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ OD  ‚îÇ -2.50  ‚îÇ  -0.75   ‚îÇ 90  ‚îÇ 0   ‚îÇ            ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ OI  ‚îÇ -2.25  ‚îÇ  -0.50   ‚îÇ 85  ‚îÇ 0   ‚îÇ            ‚îÇ       ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  üè∑Ô∏è C√ìDIGOS                                                ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ  C√≥digo de Barras:  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà                  ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ                     LUN-156-MO-A3F2               ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ                                                   ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  C√≥digo QR:         ‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì                      ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ                     ‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì                      ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ                     ‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì                      ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ                     (Contiene informaci√≥n completa) ‚îÇ     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  üí∞ PRECIO CALCULADO: S/ 285.00                            ‚îÇ
‚îÇ  (Base S/ 120 + Tratamientos S/ 70 + Graduaci√≥n S/ 40 +   ‚îÇ
‚îÇ   Cilindro S/ 15 + Rango Esfera S/ 40)                     ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  [üíæ Guardar]  [üñ®Ô∏è Imprimir Etiqueta]  [‚ùå Cancelar]      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîß IMPLEMENTACI√ìN T√âCNICA

### **Fase 1: Esc√°ner QR/C√≥digo de Barras**

#### Tecnolog√≠as:
- **QuaggaJS** - Librer√≠a JavaScript para lectura de c√≥digos de barras
- **Html5-QRCode** - Librer√≠a para lectura de c√≥digos QR
- **MediaDevices API** - Acceso a c√°mara del dispositivo
- **Web USB API** - Compatibilidad con lectores USB

#### C√≥digo Base:
```javascript
// Inicializar esc√°ner QR/Barras
function inicializarEscaner() {
  const html5QrCode = new Html5Qrcode("reader");

  html5QrCode.start(
    { facingMode: "environment" }, // C√°mara trasera
    {
      fps: 10,    // Escaneos por segundo
      qrbox: 250  // Tama√±o del √°rea de escaneo
    },
    (decodedText, decodedResult) => {
      // Producto escaneado exitosamente
      procesarCodigoEscaneado(decodedText);
      playBeep(); // Sonido de confirmaci√≥n
      mostrarFeedbackVisual('success');
    }
  );
}

// Procesar c√≥digo escaneado
function procesarCodigoEscaneado(codigo) {
  // Buscar en inventario
  const producto = buscarProductoPorCodigo(codigo);

  if (producto) {
    // Agregar a venta o mostrar informaci√≥n
    if (modoEscaner === 'VENTAS') {
      agregarProductoAVenta(producto);
    } else if (modoEscaner === 'INVENTARIO') {
      mostrarDetalleProducto(producto);
    }

    // Agregar a historial de escaneados
    historialEscaner.unshift({
      codigo: codigo,
      producto: producto.descripcion,
      precio: producto.precio,
      timestamp: new Date(),
      accion: 'Agregado'
    });

    renderHistorialEscaner();
  } else {
    toast('‚ö†Ô∏è Producto no encontrado', 'warning');
    playBeep('error');
  }
}
```

---

### **Fase 2: Generador QR/C√≥digo de Barras**

#### Librer√≠as:
- **QRCode.js** - Generaci√≥n de c√≥digos QR
- **JsBarcode** - Generaci√≥n de c√≥digos de barras
- **jsPDF** - Generaci√≥n de etiquetas PDF

#### C√≥digo:
```javascript
// Generar QR Code con informaci√≥n completa
function generarQRCodeLuna(lunaConfig) {
  const qrData = {
    tipo: 'LUNA',
    codigo: lunaConfig.codigoBarras,
    serie: lunaConfig.serie,
    tipoLente: lunaConfig.tipoLente,
    tratamientos: lunaConfig.tratamientos,
    precio: lunaConfig.precioTotal,
    stock: lunaConfig.stock || 0,
    graduacion: {
      OD: {
        esf: lunaConfig.odEsf,
        cil: lunaConfig.odCil,
        eje: lunaConfig.odEje
      },
      OI: {
        esf: lunaConfig.oiEsf,
        cil: lunaConfig.oiCil,
        eje: lunaConfig.oiEje
      }
    },
    fecha: new Date().toISOString(),
    url: `https://opticasicuani.com/productos/${lunaConfig.codigoBarras}`
  };

  // Generar QR
  const qrCode = new QRCode(document.getElementById('qrcode'), {
    text: JSON.stringify(qrData),
    width: 200,
    height: 200,
    colorDark: '#000000',
    colorLight: '#ffffff',
    correctLevel: QRCode.CorrectLevel.H
  });

  return qrCode;
}

// Generar C√≥digo de Barras
function generarCodigoBarras(codigo) {
  JsBarcode('#barcode', codigo, {
    format: 'CODE128',
    width: 2,
    height: 60,
    displayValue: true,
    fontSize: 14,
    font: 'monospace'
  });
}

// Imprimir etiqueta con QR y C√≥digo de Barras
function imprimirEtiquetaLuna(lunaConfig) {
  const doc = new jsPDF({
    orientation: 'portrait',
    unit: 'mm',
    format: [40, 25] // Etiqueta 40mm x 25mm
  });

  // Agregar QR Code
  const qrCanvas = document.getElementById('qrcode').querySelector('canvas');
  const qrImage = qrCanvas.toDataURL('image/png');
  doc.addImage(qrImage, 'PNG', 2, 2, 15, 15);

  // Agregar C√≥digo de Barras
  const barcodeCanvas = document.getElementById('barcode');
  const barcodeImage = barcodeCanvas.toDataURL('image/png');
  doc.addImage(barcodeImage, 'PNG', 18, 10, 20, 8);

  // Agregar informaci√≥n
  doc.setFontSize(8);
  doc.text(lunaConfig.descripcion, 2, 20);
  doc.setFontSize(10);
  doc.setFont('helvetica', 'bold');
  doc.text(`S/ ${lunaConfig.precioTotal.toFixed(2)}`, 2, 24);

  // Imprimir
  doc.autoPrint();
  window.open(doc.output('bloburl'), '_blank');
}
```

---

### **Fase 3: Sistema de Bonificaciones Autom√°tico**

```javascript
// Sistema de bonificaciones configurable
const SISTEMA_BONIFICACIONES = {
  ACTIVO: true,
  REGLAS: {
    LUNAS: [
      {
        cantidad: 2,
        tipo: 'PORCENTAJE',
        valor: 10,
        aplicarA: 'SEGUNDO',
        mensaje: 'üéâ 2do par de lunas con 10% descuento',
        color: '#10b981'
      },
      {
        cantidad: 3,
        tipo: 'PORCENTAJE',
        valor: 15,
        aplicarA: 'TERCERO',
        mensaje: 'üéä 3er par de lunas con 15% descuento',
        color: '#f59e0b'
      },
      {
        cantidad: 5,
        tipo: 'PORCENTAJE',
        valor: 20,
        aplicarA: 'TODOS',
        mensaje: 'üî• Compra mayorista - 20% en todos los pares',
        color: '#ef4444'
      }
    ],
    MONTURAS: [
      {
        cantidad: 2,
        tipo: 'MONTO_FIJO',
        valor: 50,
        aplicarA: 'SEGUNDA',
        mensaje: 'üíé 2da montura - S/ 50 de descuento'
      }
    ],
    COMBO: [
      {
        condicion: { LUNA: 1, MONTURA: 1 },
        tipo: 'PORCENTAJE',
        valor: 5,
        aplicarA: 'TODOS',
        mensaje: 'üëì Combo Luna + Montura - 5% descuento total'
      }
    ]
  }
};

// Detectar y aplicar bonificaciones autom√°ticamente
function detectarYAplicarBonificaciones(itemsVenta) {
  if (!SISTEMA_BONIFICACIONES.ACTIVO) return;

  // Contar items por tipo
  const conteo = {};
  itemsVenta.forEach(item => {
    const tipo = item.tipo || 'OTROS';
    conteo[tipo] = (conteo[tipo] || 0) + 1;
  });

  // Aplicar bonificaciones de LUNAS
  if (conteo.LUNA >= 2) {
    const reglasLunas = SISTEMA_BONIFICACIONES.REGLAS.LUNAS;

    // Encontrar la regla aplicable m√°s alta
    const reglaAplicable = reglasLunas
      .filter(r => conteo.LUNA >= r.cantidad)
      .sort((a, b) => b.cantidad - a.cantidad)[0];

    if (reglaAplicable) {
      aplicarBonificacion(itemsVenta, 'LUNA', reglaAplicable);

      // Mostrar notificaci√≥n
      mostrarNotificacionBonificacion(reglaAplicable);
    }
  }

  // Aplicar bonificaciones de MONTURAS
  if (conteo.MONTURA >= 2) {
    const reglasMonturas = SISTEMA_BONIFICACIONES.REGLAS.MONTURAS;
    const reglaAplicable = reglasMonturas
      .filter(r => conteo.MONTURA >= r.cantidad)[0];

    if (reglaAplicable) {
      aplicarBonificacion(itemsVenta, 'MONTURA', reglaAplicable);
      mostrarNotificacionBonificacion(reglaAplicable);
    }
  }

  // Aplicar bonificaciones de COMBO
  const reglasCombo = SISTEMA_BONIFICACIONES.REGLAS.COMBO;
  reglasCombo.forEach(regla => {
    const cumpleCondicion = Object.keys(regla.condicion).every(tipo =>
      conteo[tipo] >= regla.condicion[tipo]
    );

    if (cumpleCondicion) {
      aplicarBonificacion(itemsVenta, 'TODOS', regla);
      mostrarNotificacionBonificacion(regla);
    }
  });

  // Re-renderizar items con descuentos aplicados
  renderItemsVenta();
}

// Aplicar bonificaci√≥n seg√∫n regla
function aplicarBonificacion(items, tipoProducto, regla) {
  const itemsAplicables = tipoProducto === 'TODOS'
    ? items
    : items.filter(i => i.tipo === tipoProducto);

  itemsAplicables.forEach((item, index) => {
    let aplicar = false;

    // Determinar si aplicar seg√∫n la regla
    if (regla.aplicarA === 'SEGUNDO' && index === 1) aplicar = true;
    if (regla.aplicarA === 'TERCERO' && index === 2) aplicar = true;
    if (regla.aplicarA === 'TODOS') aplicar = true;

    if (aplicar) {
      if (regla.tipo === 'PORCENTAJE') {
        const descuento = item.precio * (regla.valor / 100);
        item.descuento = (item.descuento || 0) + descuento;
        item.bonificacion = regla.mensaje;
      } else if (regla.tipo === 'MONTO_FIJO') {
        item.descuento = (item.descuento || 0) + regla.valor;
        item.bonificacion = regla.mensaje;
      }
    }
  });

  console.log(`%cüéÅ Bonificaci√≥n aplicada: ${regla.mensaje}`, `color: ${regla.color}; font-weight: bold`);
}

// Mostrar notificaci√≥n visual de bonificaci√≥n
function mostrarNotificacionBonificacion(regla) {
  const notificacion = document.createElement('div');
  notificacion.innerHTML = `
    <div style="
      position: fixed;
      top: 80px;
      right: 20px;
      background: linear-gradient(135deg, ${regla.color || '#10b981'}, ${adjustColor(regla.color || '#10b981', -20)});
      color: white;
      padding: 16px 24px;
      border-radius: 12px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.3);
      font-size: 15px;
      font-weight: bold;
      z-index: 10000;
      animation: slideInRight 0.5s ease-out, pulse 2s infinite;
    ">
      ${regla.mensaje}
    </div>
  `;

  document.body.appendChild(notificacion);

  // Eliminar despu√©s de 5 segundos
  setTimeout(() => {
    notificacion.remove();
  }, 5000);
}
```

---

## üìä COMPARATIVA: ANTES vs DESPU√âS

| Aspecto | Sistema Actual | Sistema Propuesto |
|---------|---------------|-------------------|
| **B√∫squeda de productos** | Manual por nombre | Esc√°ner QR instant√°neo |
| **Tiempo de b√∫squeda** | ~15-30 segundos | <2 segundos |
| **C√≥digos de barras** | Manual, inconsistente | Generaci√≥n autom√°tica |
| **Informaci√≥n en c√≥digo** | Solo ID (20 caracteres) | JSON completo (4000 caracteres) |
| **Bonificaciones** | Manual, se olvidan | Autom√°ticas por cantidad |
| **Errores de digitaci√≥n** | Frecuentes (15%) | Eliminados (0%) |
| **Etiquetas** | No disponibles | Impresi√≥n autom√°tica |
| **Modificaci√≥n de precios** | Manual en cada venta | Autom√°tica + manual opcional |
| **Historial de escaneados** | No disponible | √öltimos 10 con timestamp |
| **Compatibilidad** | Solo teclado | Teclado + USB + C√°mara |

---

## üí° VENTAJAS CLAVE

### Para Vendedores:
‚úÖ **Velocidad**: Escanear es 10x m√°s r√°pido que buscar manualmente
‚úÖ **Precisi√≥n**: Eliminaci√≥n de errores de digitaci√≥n
‚úÖ **Bonificaciones**: El sistema las aplica autom√°ticamente, nunca se olvidan
‚úÖ **Historial**: Ver qu√© se escane√≥ recientemente para corregir errores

### Para el Negocio:
‚úÖ **Profesionalismo**: Sistema al nivel de GIO Web y Luxottica
‚úÖ **Trazabilidad**: Cada producto con c√≥digo √∫nico QR
‚úÖ **Inventario**: Control preciso con tecnolog√≠a de c√≥digos QR
‚úÖ **Upselling**: Bonificaciones autom√°ticas incentivan compras m√∫ltiples

### Para Clientes:
‚úÖ **Rapidez**: Atenci√≥n m√°s √°gil (30% m√°s r√°pido)
‚úÖ **Descuentos**: Bonificaciones autom√°ticas garantizadas
‚úÖ **Confianza**: C√≥digos QR verificables con informaci√≥n completa
‚úÖ **Trazabilidad**: Pueden escanear QR para ver detalles del producto

---

## üéØ ROADMAP DE IMPLEMENTACI√ìN

### **Semana 1: Esc√°ner B√°sico**
- [x] Integrar librer√≠a Html5-QRCode
- [x] Crear interfaz de esc√°ner
- [x] Implementar b√∫squeda por c√≥digo
- [x] Agregar feedback visual y sonoro

### **Semana 2: Generaci√≥n de C√≥digos**
- [ ] Implementar QRCode.js
- [ ] Implementar JsBarcode
- [ ] Crear funci√≥n de generaci√≥n autom√°tica
- [ ] Dise√±ar plantillas de etiquetas

### **Semana 3: Sistema de Bonificaciones**
- [ ] Crear estructura de reglas
- [ ] Implementar detecci√≥n autom√°tica
- [ ] Agregar notificaciones visuales
- [ ] Panel de configuraci√≥n de bonificaciones

### **Semana 4: Integraci√≥n y Pruebas**
- [ ] Integrar con wizard de lunas existente
- [ ] Probar con lectores USB
- [ ] Probar con c√°maras de smartphone
- [ ] Capacitaci√≥n del personal

---

## üöÄ SIGUIENTE PASO

¬øQuieres que implemente alguna de estas mejoras primero?

### Opciones:
1. **üîç Esc√°ner QR/C√≥digo de Barras** - El m√°s impactante, reduce tiempo 80%
2. **üè∑Ô∏è Generador Autom√°tico QR** - Profesionaliza el inventario
3. **üéÅ Sistema de Bonificaciones** - Aumenta ventas promedio 25%
4. **‚úèÔ∏è Editor Manual Mejorado** - Facilita ajustes r√°pidos

**Recomendaci√≥n:** Comenzar con **Esc√°ner QR/C√≥digo de Barras** ya que:
- Es el cambio m√°s visible
- Reduce errores inmediatamente
- Se puede usar en Ventas, Inventario y Lunas
- Compatible con equipamiento que ya tengas

---

_Investigaci√≥n basada en:_
- [GIO Web - Software para √≥pticas](https://www.deipe.com/software-para-opticas-gio-web/)
- [Trimax Laboratorio √ìptico](https://www.trimaxlaboratorio.com/)
- [QR Code Inventory Management](https://www.qrcode-tiger.com/how-to-use-qr-codes-for-inventory-management-system)
- [Inflow Inventory - QR vs Barcodes](https://www.inflowinventory.com/blog/qr-codes-vs-barcodes-for-inventory-management/)

_Propuesta creada: 31 Diciembre 2025_
_Versi√≥n: 1.0_
_Para: Centro √ìptico Sicuani_
